{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/abrikos/WebstormProjects/math/src/components/inputModel/InputDatePicker.js\",\n    _s = $RefreshSig$();\n\nimport DatePicker, { registerLocale, setDefaultLocale } from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport React, { useState } from \"react\";\nimport ru from 'date-fns/locale/ru';\nimport moment from \"moment\";\nimport { Button } from \"react-bootstrap\";\nregisterLocale('ru', ru);\nexport default function InputDatePicker(props) {\n  _s();\n\n  const [date, setDate] = useState(props.value);\n  const [show, setShow] = useState(false);\n\n  function adaptDate(date) {\n    return moment(date).format('YYYY-MM-DD');\n  }\n\n  function changeDate(date) {\n    setDate(adaptDate(date));\n    setShow(false);\n    const element = document.getElementById(`picker-${props.name}`);\n    const event = new Event(\"input\", {\n      bubbles: true\n    });\n    event.simulated = true;\n    let tracker = element._valueTracker;\n\n    if (tracker) {\n      tracker.setValue(adaptDate(date));\n    }\n\n    console.log(event);\n    element.dispatchEvent(event);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [show && /*#__PURE__*/_jsxDEV(DatePicker, {\n      hidden: true,\n      inline: true,\n      withPortal: true,\n      onChange: changeDate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: setShow,\n      children: [\" \", adaptDate(date)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      value: date,\n      name: props.name,\n      readOnly: true,\n      hidden: true,\n      id: `picker-${props.name}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 12\n  }, this);\n}\n\n_s(InputDatePicker, \"gou2WoA01Btf3T+AayV68e7KjZU=\");\n\n_c = InputDatePicker;\n\nvar _c;\n\n$RefreshReg$(_c, \"InputDatePicker\");","map":{"version":3,"sources":["/home/abrikos/WebstormProjects/math/src/components/inputModel/InputDatePicker.js"],"names":["DatePicker","registerLocale","setDefaultLocale","React","useState","ru","moment","Button","InputDatePicker","props","date","setDate","value","show","setShow","adaptDate","format","changeDate","element","document","getElementById","name","event","Event","bubbles","simulated","tracker","_valueTracker","setValue","console","log","dispatchEvent"],"mappings":";;;;;AAAA,OAAOA,UAAP,IAAqBC,cAArB,EAAqCC,gBAArC,QAA6D,kBAA7D;AACA,OAAO,4CAAP;AACA,OAAOC,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,EAAP,MAAe,oBAAf;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAAQC,MAAR,QAAqB,iBAArB;AACAN,cAAc,CAAC,IAAD,EAAOI,EAAP,CAAd;AAEA,eAAe,SAASG,eAAT,CAAyBC,KAAzB,EAA+B;AAAA;;AAC1C,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBP,QAAQ,CAACK,KAAK,CAACG,KAAP,CAAhC;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,KAAD,CAAhC;;AAEA,WAASW,SAAT,CAAmBL,IAAnB,EAAwB;AACpB,WAAOJ,MAAM,CAACI,IAAD,CAAN,CAAaM,MAAb,CAAoB,YAApB,CAAP;AACH;;AAED,WAASC,UAAT,CAAoBP,IAApB,EAAyB;AACrBC,IAAAA,OAAO,CAACI,SAAS,CAACL,IAAD,CAAV,CAAP;AACAI,IAAAA,OAAO,CAAC,KAAD,CAAP;AACA,UAAMI,OAAO,GAAGC,QAAQ,CAACC,cAAT,CAAyB,UAASX,KAAK,CAACY,IAAK,EAA7C,CAAhB;AAEA,UAAMC,KAAK,GAAG,IAAIC,KAAJ,CAAU,OAAV,EAAmB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAAnB,CAAd;AACAF,IAAAA,KAAK,CAACG,SAAN,GAAkB,IAAlB;AACA,QAAIC,OAAO,GAAGR,OAAO,CAACS,aAAtB;;AACA,QAAID,OAAJ,EAAa;AACTA,MAAAA,OAAO,CAACE,QAAR,CAAiBb,SAAS,CAACL,IAAD,CAA1B;AACH;;AACDmB,IAAAA,OAAO,CAACC,GAAR,CAAYR,KAAZ;AACAJ,IAAAA,OAAO,CAACa,aAAR,CAAsBT,KAAtB;AACH;;AAGD,sBAAO;AAAA,eAEFT,IAAI,iBAAI,QAAC,UAAD;AACL,MAAA,MAAM,MADD;AAEL,MAAA,MAAM,MAFD;AAGL,MAAA,UAAU,MAHL;AAIL,MAAA,QAAQ,EAAEI;AAJL;AAAA;AAAA;AAAA;AAAA,YAFN,eAQJ;AAAQ,MAAA,OAAO,EAAEH,OAAjB;AAAA,sBAA4BC,SAAS,CAACL,IAAD,CAArC;AAAA;AAAA;AAAA;AAAA;AAAA,YARI,eASH;AAAO,MAAA,KAAK,EAAEA,IAAd;AAAqB,MAAA,IAAI,EAAED,KAAK,CAACY,IAAjC;AAAuC,MAAA,QAAQ,MAA/C;AAAgD,MAAA,MAAM,MAAtD;AAAuD,MAAA,EAAE,EAAG,UAASZ,KAAK,CAACY,IAAK;AAAhF;AAAA;AAAA;AAAA;AAAA,YATG;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAWH;;GAnCuBb,e;;KAAAA,e","sourcesContent":["import DatePicker, { registerLocale, setDefaultLocale } from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport React, {useState} from \"react\";\nimport ru from 'date-fns/locale/ru';\nimport moment from \"moment\";\nimport {Button} from \"react-bootstrap\";\nregisterLocale('ru', ru)\n\nexport default function InputDatePicker(props){\n    const [date, setDate] = useState(props.value)\n    const [show, setShow] = useState(false)\n\n    function adaptDate(date){\n        return moment(date).format('YYYY-MM-DD')\n    }\n\n    function changeDate(date){\n        setDate(adaptDate(date))\n        setShow(false)\n        const element = document.getElementById(`picker-${props.name}`);\n\n        const event = new Event(\"input\", { bubbles: true });\n        event.simulated = true;\n        let tracker = element._valueTracker;\n        if (tracker) {\n            tracker.setValue(adaptDate(date));\n        }\n        console.log(event)\n        element.dispatchEvent(event);\n    }\n\n\n    return <div>\n\n        {show && <DatePicker\n            hidden\n            inline\n            withPortal\n            onChange={changeDate}\n        />}\n       <button onClick={setShow}> {adaptDate(date)}</button>\n        <input value={date}  name={props.name} readOnly hidden id={`picker-${props.name}`}/>\n    </div>\n}\n"]},"metadata":{},"sourceType":"module"}